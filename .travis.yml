language: python
python:
  - "2.7"
# preinstall packages
before_install:
#- "/sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac -screen 0 1280x1024x16"
  - sudo apt-get update -qq
  - sudo apt-get install -y haskell-platform
  - sudo apt-get install firefox
  - cabal update
  - cabal install pandoc
  - cp mysite/mysite/settings/local_conf_example.py mysite/mysite/settings/local_conf.py
  - cp fab_settings.py.example fab_settings.py
# command to install dependencies
install:
  - "pip install -r requirements.txt"
# command to run tests
script:
  - cd mysite/
  - python manage.py test 

deploy:
  provider: heroku
  api_key: 30854b32426b8f6fb25adbfa6c003467f6bda3cc
  app: socraticqs
  on:
    all_branches: true
    branch: master
